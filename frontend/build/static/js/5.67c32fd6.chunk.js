(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[5],{156:function(e,a,t){"use strict";var n=t(115),r=t(125),s=Object(n.a)((function(e){return Object(r.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},marginedTop:{marginTop:e.spacing(2)}})}));a.a=s},163:function(e,a,t){"use strict";var n=t(1),r=t(2),s=t(25),i=t(0),o=(t(4),t(3)),l=t(5),c=t(6),d=i.forwardRef((function(e,a){var t=e.classes,s=e.className,l=e.component,d=void 0===l?"div":l,u=e.disableGutters,m=void 0!==u&&u,p=e.fixed,f=void 0!==p&&p,b=e.maxWidth,h=void 0===b?"lg":b,v=Object(r.a)(e,["classes","className","component","disableGutters","fixed","maxWidth"]);return i.createElement(d,Object(n.a)({className:Object(o.a)(t.root,s,f&&t.fixed,m&&t.disableGutters,!1!==h&&t["maxWidth".concat(Object(c.a)(String(h)))]),ref:a},v))}));a.a=Object(l.a)((function(e){return{root:Object(s.a)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),display:"block"},e.breakpoints.up("sm"),{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}),disableGutters:{paddingLeft:0,paddingRight:0},fixed:Object.keys(e.breakpoints.values).reduce((function(a,t){var n=e.breakpoints.values[t];return 0!==n&&(a[e.breakpoints.up(t)]={maxWidth:n}),a}),{}),maxWidthXs:Object(s.a)({},e.breakpoints.up("xs"),{maxWidth:Math.max(e.breakpoints.values.xs,444)}),maxWidthSm:Object(s.a)({},e.breakpoints.up("sm"),{maxWidth:e.breakpoints.values.sm}),maxWidthMd:Object(s.a)({},e.breakpoints.up("md"),{maxWidth:e.breakpoints.values.md}),maxWidthLg:Object(s.a)({},e.breakpoints.up("lg"),{maxWidth:e.breakpoints.values.lg}),maxWidthXl:Object(s.a)({},e.breakpoints.up("xl"),{maxWidth:e.breakpoints.values.xl})}}),{name:"MuiContainer"})(d)},164:function(e,a,t){"use strict";var n=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;a.validate=function(e){if(!e)return!1;if(e.length>254)return!1;if(!n.test(e))return!1;var a=e.split("@");return!(a[0].length>64)&&!a[1].split(".").some((function(e){return e.length>63}))}},165:function(e,a,t){"use strict";t.d(a,"a",(function(){return w}));var n=t(9),r=t(0),s=t.n(r),i=t(217),o=t(218),l=t(220),c=t(176),d=t(121),u=t(221),m=t(117),p=t(118),f=t(119),b=t(167),h=t.n(b),v=t(65),g=t(168),E=t.n(g),j=t(34),O=t(48);function w(e){var a=e.className,t=void 0===a?"":a,b=e.onChange,g=e.fieldId,w=e.label,x=void 0===w?"Password":w,y=e.validation,I=void 0===y?"none":y,k=e.original,C=Object(r.useState)(""),R=Object(n.a)(C,2),P=R[0],A=R[1],S=Object(r.useState)([]),W=Object(n.a)(S,2),_=W[0],z=W[1],M=Object(r.useState)(!1),N=Object(n.a)(M,2),L=N[0],T=N[1];return Object(O.a)((function(){b(P,0===_.length)}),[P,_]),s.a.createElement(s.a.Fragment,null,s.a.createElement(i.a,{className:t,fullWidth:!0},s.a.createElement(o.a,{htmlFor:"adornment-password-"+g},x),s.a.createElement(l.a,{id:"adornment-password-"+g,type:L?"text":"password",value:P,onChange:function(e){var a=[];switch(I){case"rules":(function(e){var a=[];return e.length<5&&a.push("Password should be longer than 4 characters"),/\d/.test(e)||a.push("Password must have at least one digit"),/[a-z]/.test(e)||a.push("Password must have at least one lowercase character"),/[A-Z]/.test(e)||a.push("Password must have at least one uppercase character"),a})(P).forEach((function(e){return a.push(e)}));break;case"repeat":P!==k&&a.push("Both password must be equals")}Object(v.isEqual)(a,_)||z(a),A(e.target.value)},error:_.length>0,endAdornment:s.a.createElement(c.a,{position:"end"},s.a.createElement(d.a,{"aria-label":"toggle password visibility",onClick:function(){T((function(e){return!e}))},onMouseDown:function(e){e.preventDefault()}},L?s.a.createElement(h.a,null):s.a.createElement(E.a,null)))}),_.length>0&&s.a.createElement(u.a,{id:"password-helper"+g,error:!0,component:"div"},s.a.createElement(m.a,{dense:!0},_.map((function(e){return s.a.createElement(p.a,{key:Object(j.a)(e,10)},s.a.createElement(f.a,{primary:e}))}))))))}},167:function(e,a,t){"use strict";var n=t(33);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),s=(0,n(t(36)).default)(r.default.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.default=s},168:function(e,a,t){"use strict";var n=t(33);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),s=(0,n(t(36)).default)(r.default.createElement("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.default=s},173:function(e,a,t){"use strict";var n=t(33);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var r=n(t(0)),s=(0,n(t(36)).default)(r.default.createElement("path",{d:"M11.67 3.87L9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");a.default=s},176:function(e,a,t){"use strict";var n=t(1),r=t(2),s=t(0),i=(t(4),t(3)),o=t(46),l=t(5),c=t(157),d=s.forwardRef((function(e,a){var t=e.children,l=e.classes,d=e.className,u=e.component,m=void 0===u?"div":u,p=e.disablePointerEvents,f=void 0!==p&&p,b=e.disableTypography,h=void 0!==b&&b,v=e.position,g=e.variant,E=Object(r.a)(e,["children","classes","className","component","disablePointerEvents","disableTypography","position","variant"]),j=Object(c.b)()||{},O=g;return g&&j.variant,j&&!O&&(O=j.variant),s.createElement(c.a.Provider,{value:null},s.createElement(m,Object(n.a)({className:Object(i.a)(l.root,d,f&&l.disablePointerEvents,j.hiddenLabel&&l.hiddenLabel,"filled"===O&&l.filled,{start:l.positionStart,end:l.positionEnd}[v],"dense"===j.margin&&l.marginDense),ref:a},E),"string"!==typeof t||h?t:s.createElement(o.a,{color:"textSecondary"},t)))}));a.a=Object(l.a)({root:{display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap"},filled:{"&$positionStart:not($hiddenLabel)":{marginTop:16}},positionStart:{marginRight:8},positionEnd:{marginLeft:8},disablePointerEvents:{pointerEvents:"none"},hiddenLabel:{},marginDense:{}},{name:"MuiInputAdornment"})(d)},201:function(e,a,t){"use strict";var n=t(2),r=t(25),s=t(1),i=t(0),o=(t(4),t(3)),l=t(5),c=t(118),d=i.forwardRef((function(e,a){var t,r=e.classes,l=e.className,d=e.component,u=void 0===d?"li":d,m=e.disableGutters,p=void 0!==m&&m,f=e.ListItemClasses,b=e.role,h=void 0===b?"menuitem":b,v=e.selected,g=e.tabIndex,E=Object(n.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(t=void 0!==g?g:-1),i.createElement(c.a,Object(s.a)({button:!0,role:h,tabIndex:t,component:u,selected:v,disableGutters:p,classes:Object(s.a)({dense:r.dense},f),className:Object(o.a)(r.root,l,v&&r.selected,!p&&r.gutters),ref:a},E))}));a.a=Object(l.a)((function(e){return{root:Object(s.a)({},e.typography.body1,Object(r.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(s.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)},234:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return L}));var n=t(37),r=t(9),s=t(13),i=t(0),o=t.n(i),l=t(32),c=t(163),d=t(55),u=t(46),m=t(196),p=t(92),f=t(148),b=t(222),h=t(236),v=t(220),g=t(201),E=t(238),j=t(119),O=t(217),w=t(225),x=t(173),y=t.n(x),I=t(164),k=t(48),C=t(47),R=t(18),P=t(156),A=t(63),S=t(165),W={userId:"_",name:"",email:"",roles:[]},_=Object(s.a)({},W,{roles:[],password:"",passwordRepeat:""}),z={PaperProps:{style:{maxHeight:224,width:250}}},M={name:!1,email:!1,roles:!1,password:!1,passwordRepeat:!1},N="{\n  userId: _id\n  name\n  email\n  roles {\n    roleId: _id\n  }\n}";function L(){var e=Object(P.a)(),a=Object(i.useState)(_),t=Object(r.a)(a,2),x=t[0],L=t[1],T=Object(i.useState)("_"===x.userId),D=Object(r.a)(T,2),q=D[0],G=D[1],Z=Object(C.a)(W),B=Z.data,H=Z.errors,U=Z.flag,$=Z.fetchData,F=Object(C.a)([]),V=F.data,J=F.errors,X=F.fetchData,K=Object(i.useState)("input"),Q=Object(r.a)(K,2),Y=Q[0],ee=Q[1],ae=Object(i.useState)(M),te=Object(r.a)(ae,2),ne=te[0],re=te[1],se=Object(i.useRef)({password:!1,passwordRepeat:!1}),ie=Object(l.f)(),oe=Object(l.g)().id,le=Object(i.useRef)(!1);function ce(e){return function(a){L(Object(s.a)({},x,Object(n.a)({},e,a.target.value)))}}function de(e){return function(a,t){se.current[e]=t,L((function(t){return Object(s.a)({},t,Object(n.a)({},e,a))}))}}return Object(i.useEffect)((function(){oe||ie.push("/users"),le.current||(X({expression:"query {\n        roles {\n          roleId: _id\n          name\n          description\n        }\n      }",isAuth:!0}),"_"!==oe&&$({expression:'query{\n          userResponse: userById(id:"'.concat(oe,'") ').concat(N,"\n        }"),isAuth:!0,flag:"get"}),le.current=!0)}),[X,ie,$,oe]),Object(k.a)((function(){var e=x.name,a=x.email,t=x.roles,n={name:e.length<4,email:!Object(I.validate)(a),roles:0===t.length,password:!1,passwordRepeat:!1};q&&(n.password=se.current.password,n.passwordRepeat=se.current.passwordRepeat),re(n)}),[x,q]),Object(k.a)((function(){if("sending"===Y){var e=x.userId,a=x.password,t=x.name,n=x.email,r=x.roles,s="_"===e?"userCreate(":'userUpdate(id: "'.concat(e,'", '),i=q?', password: "'.concat(a,'"'):"",o="mutation {\n        userResponse: ".concat(s,'userInput: {\n          name: "').concat(t,'",\n          email: "').concat(n,'",\n          roles: ["').concat(r.join('", "'),'"]\n          ').concat(i,"\n        })").concat(N,"\n      }"),l="_"===x.userId?"create":"update";$({expression:o,isAuth:!0,flag:l})}}),[Y,x,q,$]),Object(k.a)((function(){B&&(["create","update"].includes(U)&&(L(Object(s.a)({},B,{roles:B.roles.map((function(e){return e.roleId})),password:"",passwordRepeat:""})),ee("saved")),"create"===U&&ie.replace("/user/".concat(B.userId)))}),[B,U,ie]),"sending"===Y?o.a.createElement(c.a,null,o.a.createElement(d.a,{container:!0,justify:"center"},o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(u.a,null,"Saving User's data")),o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(m.a,null)))):o.a.createElement(c.a,null,o.a.createElement(p.a,{m:1},o.a.createElement(f.a,{variant:"text",color:"primary",size:"small",startIcon:o.a.createElement(y.a,null),onClick:function(){return ie.push("/users")}},"Return to list")),o.a.createElement(A.a,{severity:"success",isOpen:"saved"===Y,closeFn:function(){return ee("input")},title:"User saved",body:"Data of user "+x.name+" was successfully saved on DataBase"}),o.a.createElement(R.a,{message:"Error while saving User's data or retrieving from server",errors:[H,J]}),o.a.createElement(p.a,{m:2},o.a.createElement(u.a,{variant:"h6",gutterBottom:!0},"User details"),o.a.createElement(d.a,{container:!0,spacing:3},o.a.createElement(d.a,{item:!0,xs:12,sm:6},o.a.createElement(b.a,{required:!0,name:"name",label:"Name",value:x.name,fullWidth:!0,autoComplete:"name",onChange:ce("name"),error:ne.name,helperText:ne.name&&"Put a valid name"})),o.a.createElement(d.a,{item:!0,xs:12,sm:6},o.a.createElement(b.a,{required:!0,name:"email",label:"Email",fullWidth:!0,autoComplete:"email",value:x.email,onChange:ce("email"),error:ne.email,helperText:ne.email&&"Invalid email address"})),o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(h.a,{multiple:!0,required:!0,fullWidth:!0,label:"Roles",value:x.roles,input:o.a.createElement(v.a,null),renderValue:function(e){return e&&Array.isArray(e)&&Array.isArray(V)?V.filter((function(a){return e.includes(a.roleId)})).map((function(e){return e.name})).join(", "):""},onChange:function(e){var a=e.target.value;L(Object(s.a)({},x,{roles:a}))},MenuProps:z},Array.isArray(V)&&V.map((function(e){return o.a.createElement(g.a,{key:e.roleId,value:e.roleId},o.a.createElement(E.a,{checked:(a=e.roleId,x.roles.includes(a))}),o.a.createElement(j.a,{primary:e.name}),o.a.createElement(j.a,{secondary:e.description}));var a})))),"_"!==x.userId&&o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(O.a,{className:e.formControl},o.a.createElement(w.a,{control:o.a.createElement(E.a,{checked:q,onChange:function(e){G(e.target.checked)},inputProps:{"aria-label":"primary checkbox"}}),label:"Edit Password"}))),q&&o.a.createElement(o.a.Fragment,null,o.a.createElement(d.a,{item:!0,xs:12,sm:6},o.a.createElement(S.a,{fieldId:"pass_"+x.userId,onChange:de("password"),className:e.formControl,validation:"rules"})),o.a.createElement(d.a,{item:!0,xs:12,sm:6},o.a.createElement(S.a,{fieldId:"pass-rep_"+x.userId,onChange:de("passwordRepeat"),className:e.formControl,validation:"repeat",original:x.password,label:"Repeat Password"})))),o.a.createElement(d.a,{item:!0,xs:12},o.a.createElement(p.a,{display:"flex",justifyContent:"flex-end"},o.a.createElement(O.a,{className:e.formControl},o.a.createElement(f.a,{variant:"contained",onClick:function(){B&&L(Object(s.a)({},B,{roles:B.roles.map((function(e){return e.roleId})),password:"",passwordRepeat:""}))}},"Cancel")),o.a.createElement(O.a,{className:e.formControl},o.a.createElement(f.a,{variant:"contained",color:"primary",onClick:function(){if(Object.values(ne).some((function(e){return e})))return!1;ee("sending")}},"Save"))))))}}}]);
//# sourceMappingURL=5.67c32fd6.chunk.js.map