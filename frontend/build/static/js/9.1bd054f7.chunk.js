(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[9],{156:function(e,t,a){"use strict";var n=a(115),r=a(125),l=Object(n.a)((function(e){return Object(r.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)},marginedTop:{marginTop:e.spacing(2)}})}));t.a=l},170:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),r=a.n(n),l=a(92),c=a(196),i=a(46);function o(e){var t=e.items,a=e.children,n=e.emptyMessage,o=void 0===n?"There is no data to display":n,u=e.loadingMessage,d=void 0===u?"Data is loading":u;return t?Array.isArray(t)&&0===t.length?r.a.createElement(l.a,{display:"flex",justifyContent:"flex-end"},r.a.createElement(i.a,{variant:"h6",gutterBottom:!0},o)):a:r.a.createElement(r.a.Fragment,null,r.a.createElement(l.a,{display:"flex",justifyContent:"center"},r.a.createElement(c.a,{size:80})),r.a.createElement(l.a,{display:"flex",justifyContent:"center"},r.a.createElement(i.a,{variant:"h6",gutterBottom:!0},d)))}},171:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0);function r(e){var t=Object(n.useRef)();return Object(n.useEffect)((function(){t.current=e})),t.current}},172:function(e,t,a){"use strict";a.d(t,"a",(function(){return C}));var n=a(9),r=a(67),l=a(13),c=a(64),i=a(0),o=a.n(i),u=a(192),d=a(193),s=a(194),m=a(195),f=a(117),b=a(118),g=a(119),p=a(197),h=a(148),E=a(18),v=a(63),y=a(47),j=a(34);function O(e,t){var a=e.collection,n=e.modelNames,r=e.getId,i=e.getItemText;function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t?" are marked for delete":" has been deleted";return 0===e.length?["There aren't ".concat(n," selected for removal")]:e.length<11?["The following ".concat(n," ").concat(a,":")].concat(Object(c.a)(e)):["".concat(e.length," ").concat(n," ").concat(a)]}if(!a||"CLEAN"===t.type||0===a.length)return Object(l.a)({},e,{ids:[],modal:[],banner:[]});if(!(null===t||void 0===t?void 0:t.payload)||!Array.isArray(t.payload))throw new Error("bad request");var u=a.filter((function(e){return t.payload.includes(r(e))})).map((function(e){return i(e)}));return Object(l.a)({},e,{ids:t.payload,modal:o(u,!0),banner:o(u)})}function C(e){var t=e.resolver,a=e.modelNames,c=Object(r.a)(e,["resolver","modelNames"]),C=Object(i.useState)("inactive"),k=Object(n.a)(C,2),S=k[0],N=k[1],x=Object(i.useReducer)(O,Object(l.a)({ids:[],modal:[],banner:[],modelNames:a},c)),A=Object(n.a)(x,2),w=A[0],I=A[1],F=Object(y.a)(0),P=F.data,D=F.errors,T=F.fetchData;Object(i.useEffect)((function(){"send"===S&&w.ids.length>0&&(N("sending"),T({expression:"mutation {\n        multipleDelete: ".concat(t,'(ids: ["').concat(w.ids.join('", "'),'"])\n      }'),isAuth:!0}))}),[S,w,t,T]),Object(i.useEffect)((function(){P&&P>0&&N("finalized")}),[P]),Object(i.useEffect)((function(){Object(E.c)(D)&&N("error")}),[D]);return{status:S,MultiDelCompo:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{open:"confirm"===S,onClose:function(){return N("inactive")},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(d.a,{id:"alert-dialog-title"},"Do you want to permanently remove ".concat(a,"?")),o.a.createElement(s.a,null,o.a.createElement(m.a,{id:"alert-dialog-description",component:"div"},o.a.createElement(f.a,{dense:!0},w.modal.map((function(e){return o.a.createElement(b.a,{key:Object(j.a)(e,10)},o.a.createElement(g.a,{primary:e}))}))))),o.a.createElement(p.a,null,o.a.createElement(h.a,{onClick:function(){return N("inactive")},color:"secondary",variant:"contained"},"Cancel"),o.a.createElement(h.a,{onClick:function(){return N("send")},variant:"contained",color:"primary",autoFocus:!0},"Confirm delete"))),o.a.createElement(v.a,{severity:"success",isOpen:!!P&&P>0&&"finalized"===S,closeFn:function(){return N("inactive")},title:"".concat(a," successfully deleted"),body:w.banner}),o.a.createElement(v.a,{severity:"error",isOpen:"error"===S,closeFn:function(){return N("inactive")},title:"Error while deleting records of ".concat(a),body:D||"Server error"}))},handleDelete:function(e){I({type:"UPDATE",payload:e}),N("confirm")}}}},174:function(e,t,a){"use strict";a.d(t,"a",(function(){return J}));var n=a(9),r=a(37),l=a(0),c=a.n(l),i=a(3),o=a(115),u=a(125),d=a(8),s=a(227),m=a(228),f=a(229),b=a(238),g=a(244),p=a(147),h=a(46),E=a(245),v=a(121),y=a(122),j=a(230),O=a(231),C=a(232),k=a(239),S=a(225),N=a(233),x=a(180),A=a.n(x),w=a(182),I=a.n(w),F=a(179),P=a.n(F),D=a(181),T=a.n(D),R=a(92),_=Object(o.a)({integer:{textAlign:"right",width:function(e){return e.leftSidePerc+"%"}},decimal:{textAlign:"left"}});function q(e){var t,a,n=e.value,r=e.leftSidePerc,l=_({leftSidePerc:void 0===r?50:r}),i=n.toString().trim();if(Number.isNaN(Number(i)))t=i,a="";else{var o=i.toString().match(/([.,]\d*)$/g);t=parseInt(i).toString(),a=o?o[0]:""}return c.a.createElement(R.a,{display:"flex"},c.a.createElement("div",{className:l.integer},t),c.a.createElement("div",{className:l.decimal},a))}function B(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function M(e){var t=e.classes,a=e.onSelectAllClick,n=e.order,r=e.orderBy,l=e.numSelected,i=e.rowCount,o=e.onRequestSort,u=e.headCells;return c.a.createElement(s.a,null,c.a.createElement(m.a,null,c.a.createElement(f.a,{padding:"checkbox"},c.a.createElement(b.a,{indeterminate:l>0&&l<i,checked:i>0&&l===i,onChange:a,inputProps:{"aria-label":"select all desserts"}})),u.map((function(e){return c.a.createElement(f.a,{key:e.id,align:e.numeric?"right":"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&n},c.a.createElement(g.a,{active:r===e.id,direction:r===e.id?n:"asc",onClick:(a=e.id,function(e){o(e,a)})},e.label,r===e.id?c.a.createElement("span",{className:t.visuallyHidden},"desc"===n?"sorted descending":"sorted ascending"):null));var a})),c.a.createElement(f.a,null,c.a.createElement(P.a,null))))}var z=Object(o.a)((function(e){return Object(u.a)({root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(d.d)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}})})),U=function(e){var t=z(),a=e.numSelected,n=e.title,l=e.deleteFn,o=e.addFn;return c.a.createElement(p.a,{className:Object(i.a)(t.root,Object(r.a)({},t.highlight,a>0))},a>0?c.a.createElement(h.a,{className:t.title,color:"inherit",variant:"subtitle1",component:"div"},a," selected"):c.a.createElement(h.a,{className:t.title,variant:"h6",id:"tableTitle",component:"div"},n),a>0?c.a.createElement(E.a,{title:"Delete"},c.a.createElement(v.a,{"aria-label":"delete",onClick:function(){return l()}},c.a.createElement(A.a,null))):c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{title:"Filter list",key:"add"},c.a.createElement(v.a,{"aria-label":"add",onClick:function(){return o()}},c.a.createElement(T.a,null))),c.a.createElement(E.a,{title:"Add element",key:"filter"},c.a.createElement(v.a,{"aria-label":"filter list"},c.a.createElement(I.a,null)))))},H=Object(o.a)((function(e){return Object(u.a)({root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}})}));function J(e){var t=e.rows,a=e.headCells,r=e.title,l=e.editFn,i=void 0===l?null:l,o=e.idName,u=void 0===o?"_id":o,d=e.deleteFn,s=e.addFn,g=H(),p=c.a.useState("asc"),h=Object(n.a)(p,2),E=h[0],x=h[1],A=c.a.useState(""),w=Object(n.a)(A,2),I=w[0],F=w[1],D=c.a.useState([]),T=Object(n.a)(D,2),R=T[0],_=T[1],z=c.a.useState(0),J=Object(n.a)(z,2),L=J[0],W=J[1],$=c.a.useState(!1),G=Object(n.a)($,2),K=G[0],Q=G[1],V=c.a.useState(5),X=Object(n.a)(V,2),Y=X[0],Z=X[1],ee=Y-Math.min(Y,t.length-L*Y);return c.a.createElement("div",{className:g.root},c.a.createElement(y.a,{className:g.paper},c.a.createElement(U,{numSelected:R.length,title:r,deleteFn:function(){return d(R)},addFn:function(){return s()}}),c.a.createElement(j.a,null,c.a.createElement(O.a,{className:g.table,"aria-labelledby":"tableTitle",size:K?"small":"medium","aria-label":"enhanced table"},c.a.createElement(M,{classes:g,numSelected:R.length,order:E,orderBy:I,onSelectAllClick:function(e){if(e.target.checked){var a=t.map((function(e){return e.name.toString()}));_(a)}else _([])},onRequestSort:function(e,t){x(I===t&&"asc"===E?"desc":"asc"),F(t)},rowCount:t.length,headCells:a}),c.a.createElement(C.a,null,function(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}(t,function(e,t){return"desc"===e?function(e,a){return B(e,a,t)}:function(e,a){return-B(e,a,t)}}(E,I)).slice(L*Y,L*Y+Y).map((function(e,t){var n,r=(n=e[u],-1!==R.indexOf(n)),l="enhanced-table-checkbox-".concat(t);return c.a.createElement(m.a,{hover:!0,onClick:function(t){return function(e,t){var a=R.indexOf(t),n=[];-1===a?n=n.concat(R,t):0===a?n=n.concat(R.slice(1)):a===R.length-1?n=n.concat(R.slice(0,-1)):a>0&&(n=n.concat(R.slice(0,a),R.slice(a+1))),_(n)}(0,e[u])},role:"checkbox","aria-checked":r,tabIndex:-1,key:e[u],selected:r},c.a.createElement(f.a,{padding:"checkbox",key:e[u]+"_id"},c.a.createElement(b.a,{checked:r,inputProps:{"aria-labelledby":l}})),a.filter((function(e){return!e.hidden})).map((function(t){return t.numeric?c.a.createElement(f.a,{align:"center",key:e[u]+"_"+t.id},c.a.createElement(q,{value:e[t.id].toString()})):c.a.createElement(f.a,{align:"right",key:e[u]+"_"+t.id},e[t.id])})),i&&c.a.createElement(f.a,{align:"center",key:e[u]+"_edit"},c.a.createElement(v.a,{"aria-label":"edit",color:"primary",onClick:function(){return i(e[u])}},c.a.createElement(P.a,null))))})),ee>0&&c.a.createElement(m.a,{style:{height:(K?33:53)*ee}},c.a.createElement(f.a,{colSpan:6}))))),c.a.createElement(k.a,{rowsPerPageOptions:[5,10,25],component:"div",count:t.length,rowsPerPage:Y,page:L,onChangePage:function(e,t){W(t)},onChangeRowsPerPage:function(e){Z(parseInt(e.target.value,10)),W(0)}})),c.a.createElement(S.a,{control:c.a.createElement(N.a,{checked:K,onChange:function(e){Q(e.target.checked)}}),label:"Dense padding"}))}},226:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var n=a(13),r=a(9),l=a(0),c=a.n(l),i=a(32),o=a(163),u=a(92),d=a(217),s=a(222),m=a(176),f=a(218),b=a(236),g=a(201),p=a(183),h=a.n(p),E=a(65),v=a(246),y=a(170),j=a(47),O=a(174),C=a(18),k=a(171),S=a(172),N=a(156),x={search:"",roleId:""};function A(e){return'\n    query {\n      users(search: "'.concat(e.search,'", role: "').concat(e.roleId,'") {\n        userId: _id\n        name\n        email\n        roles{\n          roleId: _id\n          name\n        }\n      }\n    }\n  ')}var w=[{disablePadding:!1,id:"name",label:"Name",numeric:!1},{disablePadding:!1,id:"email",label:"E-mail",numeric:!1},{disablePadding:!1,id:"roles",label:"Roles",numeric:!1}];function I(){var e=Object(l.useState)([]),t=Object(r.a)(e,2),a=t[0],p=t[1],I=Object(l.useState)(x),F=Object(r.a)(I,2),P=F[0],D=F[1],T=Object(v.a)(P,1e3),R=Object(r.a)(T,1)[0],_=Object(j.a)(null),q=_.data,B=_.errors,M=_.fetchData,z=Object(k.a)(q),U=Object(j.a)([]),H=U.data,J=U.errors,L=U.fetchData,W=Object(N.a)(),$=Object(l.useState)(""),G=Object(r.a)($,2),K=G[0],Q=G[1],V=Object(i.f)(),X=Object(l.useRef)(!1),Y=Object(S.a)({resolver:"usersRemove",collection:q||[],getId:function(e){return e.userId},getItemText:function(e){return"".concat(e.name,"<").concat(e.email,">")},modelNames:"users"}),Z=Y.MultiDelCompo,ee=Y.handleDelete;return Object(l.useEffect)((function(){X.current||(L({expression:"query {\n        roles {\n          roleId: _id\n          name\n        }\n      }",isAuth:!0}),M({expression:A(x),isAuth:!0}),X.current=!0)}),[L,M]),Object(l.useEffect)((function(){M({expression:A(R),isAuth:!0})}),[R,M]),Object(l.useEffect)((function(){if(!Object(E.isEqual)(q,z)){var e=null===q?[]:q.map((function(e){return Object(n.a)({},e,{roles:e.roles.map((function(e){return e.name})).join(", ")})}));p(e)}}),[q,z]),c.a.createElement(o.a,null,c.a.createElement(Z,null),c.a.createElement(C.a,{message:"Error while fetching records of Users",errors:[B,J]}),c.a.createElement(u.a,null,c.a.createElement(d.a,{variant:"outlined",className:W.formControl},c.a.createElement(s.a,{variant:"outlined",margin:"normal",id:"search",label:"Search by name and email",autoComplete:"search",name:"search",autoFocus:!0,onChange:function(e){Q(e.target.value),D(Object(n.a)({},P,{search:e.target.value}))},value:K,InputProps:{endAdornment:c.a.createElement(m.a,{position:"end"},c.a.createElement(h.a,null))}})),Array.isArray(H)&&H.length>0&&c.a.createElement(d.a,{variant:"outlined",className:W.formControl},c.a.createElement(f.a,{id:"filter-role-label",className:W.marginedTop},"Role"),c.a.createElement(b.a,{label:"Filter by Role",labelId:"filter-role",id:"demo-simple-select",value:P.roleId,onChange:function(e){D(Object(n.a)({},P,{roleId:e.target.value}))},className:W.marginedTop},c.a.createElement(g.a,{value:""},c.a.createElement("em",null,"All")),Array.isArray(H)&&H.map((function(e){return c.a.createElement(g.a,{value:e.roleId,key:e.roleId},e.name)}))))),c.a.createElement(y.a,{items:q},c.a.createElement(O.a,{headCells:w,rows:a,title:"Users",idName:"userId",editFn:function(e){V.push("/user/"+e)},deleteFn:ee,addFn:function(){V.push("/user/_")}})))}}}]);
//# sourceMappingURL=9.1bd054f7.chunk.js.map