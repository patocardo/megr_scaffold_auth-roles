(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[2],{101:function(e,t,n){e.exports=n(114)},106:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(7),o=n.n(c),l=(n(106),n(16)),u=n.n(l),i=n(28),s=n(9),m=n(13),f=n(42),b=n(32),p=n(55),d=n(151),h=n(46),O=n(19),k=n(49),E=n(37),j=n(3),v=n(144),y=n(145),g=n(146),x=n(147),w=n(121),S=n(148),N=n(153),I=n(117),A=n(118),D=n(119),C=n(89),R=n.n(C),z=n(115),q=n(125),F=Object(z.a)((function(e){return Object(q.a)({navlink:{textDecoration:"none"},buttonRoot:{color:"white"},menuButton:Object(E.a)({marginRight:e.spacing(2)},e.breakpoints.up("sm"),{display:"none"}),root:Object(E.a)({flexGrow:1},e.breakpoints.up("sm"),{textAlign:"left"}),topMenu:Object(E.a)({},e.breakpoints.down("xs"),{display:"none"}),title:{flexGrow:1},list:{width:250},fullList:{width:"auto"}})}));function P(e){var t=e.children,n=e.window,a=Object(v.a)({disableHysteresis:!0,threshold:0,target:n?n():void 0});return t?r.a.cloneElement(t,{elevation:a?4:0}):r.a.createElement(r.a.Fragment,null)}var T=[{label:"Login",key:"login"}];function G(e){var t=F(),n=Object(a.useContext)(O.b).contextState,c=Object(a.useState)(!1),o=Object(s.a)(c,2),l=o[0],u=o[1],i=Object(a.useState)(T),m=Object(s.a)(i,2),p=m[0],d=m[1],E=Object(b.f)(),v=Object(k.c)().logOut,C=function(e){return function(t){"keydown"===t.type&&["Tab","Shift"].includes(t.key)||u(e)}};return Object(a.useEffect)((function(){d(n.token.length>3?[{label:"Home",key:""},{label:"Users",key:"users"},{label:"Roles",key:"roles"}]:T)}),[n.token]),r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,null),r.a.createElement(P,e,r.a.createElement(g.a,{className:t.root},r.a.createElement(x.a,null,r.a.createElement(w.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:C(!0)},r.a.createElement(R.a,null)),r.a.createElement(h.a,{variant:"h6",className:t.title},"Auth-Auth"),r.a.createElement("div",{className:t.topMenu},p.map((function(e){return r.a.createElement(f.c,{to:"/".concat(e.key),key:e.label,className:t.navlink},r.a.createElement(S.a,{color:"primary",classes:{root:t.buttonRoot}},e.label))})),n.token.length>3&&r.a.createElement(S.a,{color:"primary",classes:{root:t.buttonRoot},onClick:function(){v(!0),E.push("/")}},"Log Out"))))),r.a.createElement(x.a,null),r.a.createElement(N.a,{anchor:"left",open:l,onClose:C(!1)},r.a.createElement("div",{className:Object(j.a)(t.list),role:"presentation",onClick:C(!1),onKeyDown:C(!1)},r.a.createElement(I.a,null,p.map((function(e,n){return r.a.createElement(f.c,{to:"/".concat(e.key),key:e.key,className:t.navlink},r.a.createElement(A.a,{button:!0},r.a.createElement(D.a,{primary:e.label})))}))))))}var J=n(18),B=Object(a.lazy)((function(){return n.e(7).then(n.bind(null,215))})),U=Object(a.lazy)((function(){return n.e(11).then(n.bind(null,237))})),H=Object(a.lazy)((function(){return n.e(12).then(n.bind(null,216))})),L=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(6)]).then(n.bind(null,240))})),M=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,226))})),K=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,234))})),W=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(8)]).then(n.bind(null,235))})),_=Object(a.lazy)((function(){return Promise.all([n.e(0),n.e(10)]).then(n.bind(null,241))})),$=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p.a,{container:!0,justify:"center",spacing:2},r.a.createElement(p.a,{item:!0,xs:8},r.a.createElement(d.a,null)),r.a.createElement(p.a,{item:!0,xs:8},r.a.createElement(h.a,{align:"center",variant:"h6"},"Loading App"))))},Q=Object(m.a)({},O.a,{token:"_"});var V=Object(J.b)((function(){var e=Object(a.useReducer)(O.c,Q),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(null),l=Object(s.a)(o,2),m=l[0],p=l[1];Object(a.useEffect)((function(){Object(i.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("_"===n.token){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,Object(k.a)(n.token.length>3?n.token:"");case 5:(t=e.sent).token.length<3?c({type:"SIGNEDOUT"}):c({type:"SIGNEDIN",payload:t}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),p(Object(J.e)(e.t0));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()}),[n.token,c]),Object(a.useEffect)((function(){m&&m.forEach((function(e){return Object(J.d)(e.message)}))}),[m]);var d=n.token.length>3;return r.a.createElement(O.b.Provider,{value:{contextState:n,contextDispatch:c}},r.a.createElement(f.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(G,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement($,null)},d&&r.a.createElement(B,null),r.a.createElement(b.c,null,d&&[r.a.createElement(b.a,{exact:!0,path:"/users",key:"users"},r.a.createElement(M,null)),r.a.createElement(b.a,{path:"/user/:id",key:"useredit"},r.a.createElement(K,null)),r.a.createElement(b.a,{exact:!0,path:"/roles",key:"roles"},r.a.createElement(W,null)),r.a.createElement(b.a,{path:"/role/:id",key:"roleedit"},r.a.createElement(_,null))],r.a.createElement(b.a,{path:"/login",component:L}),r.a.createElement(b.a,{exact:!0,path:"/"},r.a.createElement(U,null)),"_"!==n.token&&r.a.createElement(b.a,{path:"*"},r.a.createElement(H,null)))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},18:function(e,t,n){"use strict";n.d(t,"c",(function(){return p})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"f",(function(){return O})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return E})),n.d(t,"a",(function(){return j}));var a=n(9),r=n(67),c=n(77),o=n(78),l=n(90),u=n(91),i=n(0),s=n.n(i),m=n(34),f=n(63),b=n(48);function p(e){return Array.isArray(e)&&e.length>0&&{}.hasOwnProperty.call(e[0],"key")}function d(e){var t=e.errors;return t&&Array.isArray(t)&&t.length?t.map((function(e){return{key:Object(m.a)(e.message,10),message:e.message}})):null}function h(e){var t=Object(m.b)(e.message,e.message);return Array.isArray(t)?t:[O(e)]}function O(e){return{key:Object(m.a)(e.message,10),message:e.message,stack:e.stack}}function k(e,t){console.error(e,t)}function E(e){var t,n;return n=t=function(t){Object(u.a)(a,t);var n=Object(l.a)(a);function a(){var e;Object(c.a)(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return(e=n.call.apply(n,[this].concat(r))).state={errors:[]},e}return Object(o.a)(a,[{key:"componentDidCatch",value:function(e,t){e?(this.setState({errors:[O(e)]}),k(e,t)):new Error("Uncaught error")}},{key:"render",value:function(){var t=this.props,n=(t.children,Object(r.a)(t,["children"])),a=this.state.errors;return a&&a.length?s.a.createElement("ul",null,a.map((function(e){return s.a.createElement("li",{key:e.key},e.message)}))):s.a.createElement(e,n)}}]),a}(s.a.Component),t.displayName="withErrorBoundary(".concat(e.name,")"),t.WrappedComponent=e,n}function j(e){var t=e.errors,n=e.message,r=void 0===n?"Server Error":n,c=Object(i.useState)([]),o=Object(a.a)(c,2),l=o[0],u=o[1];return Object(b.a)((function(){var e=t.filter((function(e){return!!e}));u(e?e.flat().map((function(e){return e instanceof Error?O(e):e})):[])}),[t]),s.a.createElement(f.a,{severity:"error",isOpen:l.length>0,closeFn:function(){return u([])},title:r,body:l})}},19:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return u}));var a=n(13),r=n(0),c={token:"",email:"",expiration:null,remember:!1},o={contextState:c,contextDispatch:function(){return!1}},l=Object(r.createContext)(o);function u(e,t){var n=t.payload||{},r=n.expiration,o=void 0===r?0:r,l=n.email,u=void 0===l?"":l,i=n.token,s=void 0===i?"":i,m=n.remember,f=void 0!==m&&m;switch(t.type){case"SIGNEDOUT":return c;case"SIGNEDIN":return u.length&&o&&s.length?{email:u,token:s,expiration:o,remember:f}:Object(a.a)({},e);case"REFRESHEDTOKEN":return o&&(null===s||void 0===s?void 0:s.length)?Object(a.a)({},e,{token:s,expiration:o}):Object(a.a)({},e);default:return Object(a.a)({},e)}}},34:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var a=n(64);function r(e,t){var n=e.replace(/\s/g,"");return function(e){for(var t,n,r=e.length,c=Object(a.a)(e);0!==r;)n=Math.floor(Math.random()*r),t=c[r-=1],c[r]=c[n],c[n]=t;return c}((n=n.length>t?n:n.padEnd(t,"abcdefghijklmnopqrstuvwxyz")).split("")).slice(0,t).join("")}function c(e,t){try{return JSON.parse(e)}catch(n){return"undefined"===typeof t?null:t}}},47:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d}));var a=n(16),r=n.n(a),c=n(13),o=n(28),l=n(9),u=n(0),i=n(18),s=n(19),m="localhost"===window.location.hostname?"http://localhost:8000":window.location.origin,f={method:"POST",body:"",headers:{"Content-type":"application/json",Accept:"application/json"}};function b(e){var t=e.match(/(?:mutation|query|subscription)\s*{\s*(\w+)/im);if(!t)throw new Error("no resolver");return t[1]}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(u.useState)({data:e,flag:""}),n=Object(l.a)(t,2),a=n[0],p=n[1],d=Object(u.useState)(null),h=Object(l.a)(d,2),O=h[0],k=h[1],E=Object(u.useContext)(s.b),j=E.contextState,v=Object(u.useState)({expression:"",isAuth:!1}),y=Object(l.a)(v,2),g=y[0],x=y[1];return Object(u.useEffect)((function(){Object(o.a)(r.a.mark((function e(){var t,n,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.expression.length<6)){e.next=2;break}return e.abrupt("return");case 2:return t=Object(c.a)({},f,{body:JSON.stringify({query:g.expression})}),g.isAuth&&j.token&&(t.headers.Authorization="Bearer ".concat(j.token)),e.next=6,fetch("".concat(m,"/graphql"),t);case 6:return n=e.sent,e.next=9,n.json();case 9:if(a=e.sent,!(o=Object(i.g)(a))){e.next=14;break}return k(o),e.abrupt("return",!1);case 14:l={data:a.data[b(g.expression)],flag:g.flag||""},p(l);case 16:case"end":return e.stop()}}),e)})))()}),[g.expression,g.isAuth,g.flag,j.token]),Object(c.a)({},a,{errors:O,fetchData:x})}function d(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t){var n,a,o,l,u,s,p,d,h,O;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.token,l=t.expression,u=b(l),s=Object(c.a)({},f,{body:JSON.stringify({query:l})}),o&&o.length>4&&(s.headers.Authorization="Bearer ".concat(o)),p=null,e.prev=5,e.next=8,fetch("".concat(m,"/graphql"),s);case 8:return d=e.sent,e.next=11,d.json();case 11:if(p=e.sent){e.next=14;break}return e.abrupt("return",null);case 14:e.next=19;break;case 16:throw e.prev=16,e.t0=e.catch(5),new Error(JSON.stringify([Object(i.f)(e.t0)]));case 19:if(!(h=Object(i.g)(p))){e.next=22;break}throw new Error(JSON.stringify(h));case 22:if((null===(n=p)||void 0===n?void 0:n.data)&&"undefined"!==typeof(null===(a=p)||void 0===a?void 0:a.data[u])){e.next=25;break}throw O=JSON.stringify({key:"bad response",message:"property data and ".concat(u," not found")}),new Error(O);case 25:return e.abrupt("return",p.data[u]);case 26:case"end":return e.stop()}}),e,null,[[5,16]])})))).apply(this,arguments)}},48:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n(65);function c(e,t){Object(a.useEffect)(e,function(e){var t=Object(a.useRef)([]);return Object(r.isEqual)(e,t.current)||(t.current=e),t.current}(t))}},49:function(e,t,n){"use strict";n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return O})),n.d(t,"c",(function(){return k}));var a=n(16),r=n.n(a),c=n(13),o=n(28),l=n(9),u=n(0),i=n(18),s=n(19),m=n(47),f=n(48);function b(){var e=Object(u.useContext)(s.b),t=(e.contextState,e.contextDispatch),n=Object(u.useState)({email:"",password:"",remember:!1}),a=Object(l.a)(n,2),f=a[0],b=a[1],p=Object(u.useState)([]),d=Object(l.a)(p,2),h=d[0],O=d[1],k=Object(u.useRef)("");return Object(u.useEffect)((function(){Object(o.a)(r.a.mark((function e(){var n,a,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(f.email.length>4&&f.password.length>3)){e.next=7;break}return a='\n            query {\n              login(email: "'.concat(f.email,'", password: "').concat(f.password,'", remember: ').concat(f.remember.toString(),") {\n                token\n                expiration\n              }\n            }\n          "),e.next=5,Object(m.b)({expression:a});case 5:(o=e.sent)&&(null===(n=o.token)||void 0===n?void 0:n.length)>3&&(l=Object(c.a)({},o,{email:f.email}),f.remember?localStorage.setItem("token",o.token):sessionStorage.setItem("token",o.token),k.current=o.token,t({type:"SIGNEDIN",payload:l}),b((function(e){return Object(c.a)({},e,{email:""})})));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),O([Object(i.f)(e.t0)]);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[f.email,f.password,f.remember,t]),{loginErrors:h,logIn:b}}var p={email:"",token:"",expiration:0,remember:!1};function d(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(r.a.mark((function e(t){var n,a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t||sessionStorage.getItem("token")||localStorage.getItem("token")){e.next=3;break}return e.abrupt("return",Promise.resolve(p));case 3:return a='query {\n    tokenIsAlive(token: "'.concat(n,'") {\n      email,\n      expiration,\n      remember\n    }\n  }'),e.next=6,Object(m.b)({expression:a,token:n});case 6:return o=e.sent,e.abrupt("return",(null===o||void 0===o?void 0:o.email)?Object(c.a)({},o,{token:n}):p);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e=Object(m.a)({token:"",expiration:0}),t=e.data,n=e.errors,a=e.fetchData,r=Object(u.useContext)(s.b),o=r.contextState,i=r.contextDispatch,b=Object(u.useState)(!1),p=Object(l.a)(b,2),d=p[0],h=p[1];return Object(u.useEffect)((function(){if(d){var e=o.token||sessionStorage.getItem("token")||localStorage.getItem("token");if(!e)return;var t='query { \n        refreshToken(token: "'.concat(e,'") {\n          token\n          expiration\n        } \n      }');a({expression:t,isAuth:!0}),h(!1)}}),[d,o.token,a]),Object(f.a)((function(){if(t&&(null===t||void 0===t?void 0:t.token.length)>3){var e=Object(c.a)({},t,{email:o.email});o.remember?localStorage.setItem("token",t.token):sessionStorage.setItem("token",t.token),i({type:"REFRESHEDTOKEN",payload:e})}}),[t,i,o.email,o.remember]),{refreshErrors:n,refreshToken:h}}function k(){var e=Object(u.useContext)(s.b).contextDispatch,t=Object(u.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(u.useEffect)((function(){a&&(localStorage.removeItem("token"),sessionStorage.removeItem("token"),e({type:"SIGNEDOUT"}))}),[a,e]),{logOutErrors:null,logOut:r}}},63:function(e,t,n){"use strict";var a=n(0),r=n.n(a),c=n(117),o=n(118),l=n(119),u=n(92),i=n(120),s=n(55),m=n(46),f=n(121),b=n(86),p=n.n(b),d=n(82),h=n.n(d),O=n(83),k=n.n(O),E=n(84),j=n.n(E),v=n(85),y=n.n(v),g=n(115),x=n(125),w=n(18),S=n(34),N=Object(g.a)((function(e){return Object(x.a)({frame:{backgroundColor:function(t){return e.palette[t.severity].light},borderRadius:e.shape.borderRadius,color:e.palette.common.black},alertIcon:{color:function(t){return e.palette[t.severity].dark}}})}));function I(e){switch(e.severity){case"error":return r.a.createElement(h.a,{className:e.alertIcon});case"warning":return r.a.createElement(k.a,{className:e.alertIcon});case"info":return r.a.createElement(j.a,{className:e.alertIcon});case"success":return r.a.createElement(y.a,{className:e.alertIcon});default:return r.a.createElement(r.a.Fragment,null)}}t.a=function(e){var t=e.isOpen,n=e.severity,a=e.closeFn,b=e.title,d=e.body,h=N({severity:n}),O="string"===typeof d?d:Object(w.c)(d)?r.a.createElement(c.a,{dense:!0},d.map((function(e){return r.a.createElement(o.a,{key:e.key},r.a.createElement(l.a,{primary:e.message}))}))):d.map((function(e){return r.a.createElement(u.a,{key:Object(S.a)(e,10)},e)}));return r.a.createElement(i.a,{in:t},r.a.createElement(u.a,{className:h.frame,m:2,p:1},r.a.createElement(s.a,{container:!0},r.a.createElement(s.a,{item:!0,xs:1},r.a.createElement(I,{severity:n,alertIcon:h.alertIcon})),r.a.createElement(s.a,{item:!0,xs:"undefined"!==typeof a?10:11},r.a.createElement(m.a,{variant:"h4"},b),O),"undefined"!==typeof a&&r.a.createElement(s.a,{item:!0,xs:1},r.a.createElement(f.a,{onClick:a,color:"primary","aria-label":"close"},r.a.createElement(p.a,null))))))}}},[[101,3,4]]]);
//# sourceMappingURL=main.75f1c756.chunk.js.map